<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SquishEyez — Arcade Edition</title>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://ipfs.neftyblocks.io" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap">

<style>
  :root{--neon:#33ff99;--mag:#ff00ff;--cyan:#00ffff;--bg:#060606;--panel:#0d0d0d;--text:#d5fff0;--muted:#9fead7;--danger:#ff5d9e;--ok:#78ffa8;--bezel:#1a1a1a}
  *{box-sizing:border-box} html,body{margin:0;padding:0;background:var(--bg);color:var(--neon)}
  a{color:var(--cyan);text-decoration:none} a:hover{color:var(--mag)} img{display:block;max-width:100%}
  body::before{content:"";position:fixed;inset:0;pointer-events:none;z-index:1000;background:repeating-linear-gradient(to bottom,rgba(0,0,0,.18)0 2px,transparent 2px 4px);mix-blend-mode:overlay;opacity:.6}
  body.crt-on{filter:contrast(1.03) saturate(1.1)} body.crt-on::after{content:"";position:fixed;inset:0;pointer-events:none;z-index:1001;background:radial-gradient(ellipse at center,rgba(0,0,0,0)0%,rgba(0,0,0,.25)70%,rgba(0,0,0,.6)100%)}
  .bg-wrap{position:fixed;inset:0;z-index:-3;overflow:hidden}
  .stars,.stars2,.stars3{position:absolute;inset:-50%;background-repeat:repeat;opacity:.25;filter:blur(.3px);background-image:radial-gradient(2px 2px at 20px 30px,#fff,transparent),radial-gradient(2px 2px at 100px 80px,#fff,transparent),radial-gradient(2px 2px at 200px 130px,#fff,transparent),radial-gradient(2px 2px at 300px 40px,#fff,transparent);animation:drift 120s linear infinite}
  .stars2{animation-duration:200s;opacity:.18}.stars3{animation-duration:320s;opacity:.12}
  @keyframes drift{from{transform:translate3d(0,0,0)}to{transform:translate3d(-500px,-300px,0)}}
  .cabinet{max-width:1200px;margin:24px auto;padding:0 14px}
  .cabinet-inner{position:relative;border-radius:22px;padding:16px;background:linear-gradient(180deg,#101010 0%,#0a0a0a 100%);box-shadow:0 0 0 6px #000 inset,0 0 0 10px var(--bezel) inset,0 40px 80px rgba(0,0,0,.6);border:2px solid #0f0f0f}
  .side-left,.side-right{position:absolute;top:12px;bottom:12px;width:18px;z-index:-1;background:linear-gradient(180deg,#111 0%,#0b0b0b 60%,#111 100%);box-shadow:0 0 18px rgba(0,255,200,.18),inset 0 0 12px rgba(0,0,0,.6)}
  .side-left{left:-8px;border-left:3px solid var(--neon)} .side-right{right:-8px;border-right:3px solid var(--mag)}
  .marquee-top{position:relative;margin:-6px auto 14px;padding:12px 16px;text-align:center;border-radius:16px;background:linear-gradient(180deg,#0e0e0e,#050505);border:2px solid var(--cyan);box-shadow:0 0 20px rgba(0,255,255,.25),inset 0 0 18px rgba(0,0,0,.6)}
  .marquee-top h1{font-family:'Press Start 2P',cursive;margin:0;font-size:18px;letter-spacing:.5px;color:#eafff8;text-shadow:2px 2px var(--mag),-2px -2px var(--cyan)}
  .marquee-sub{color:var(--muted);font-size:11px;margin-top:8px}
  .screen{position:relative;border-radius:20px;padding:16px;margin:12px 0 0;background:linear-gradient(180deg,#0b0b0b,#050505);border:3px solid #0d0d0d;box-shadow:0 0 0 3px #000 inset,0 0 0 6px rgba(0,255,200,.15) inset,0 16px 40px rgba(0,0,0,.7)}
  .glass{position:absolute;inset:6px;border-radius:14px;pointer-events:none;background:linear-gradient(135deg,rgba(255,255,255,.05),rgba(255,255,255,0)40%),radial-gradient(800px 200px at 50% -120px,rgba(255,255,255,.08),transparent 70%);box-shadow:inset 0 0 60px rgba(0,0,0,.45)}
  .controls{margin:16px 0 0;padding:14px 16px;border-radius:14px;background:linear-gradient(180deg,#0d0d0d,#080808);border:2px solid #0e0e0e;display:flex;align-items:center;gap:14px;justify-content:space-between}
  .stick{width:46px;height:46px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#444,#111);box-shadow:inset -8px -10px 16px rgba(0,0,0,.6),0 6px 12px rgba(0,0,0,.5);position:relative}
  .stick::after{content:"";position:absolute;inset:14px;border-radius:50%;background:radial-gradient(circle at 30% 30%,var(--mag),#320021);box-shadow:0 0 12px rgba(255,0,255,.45)}
  .btn{min-width:64px;padding:10px 12px;border-radius:12px;background:linear-gradient(180deg,#121212,#0a0a0a);border:2px solid var(--neon);color:#eafff8;font-family:'Press Start 2P';font-size:11px;cursor:pointer;box-shadow:0 0 18px rgba(0,255,200,.22),inset 0 0 10px rgba(0,255,255,.12)}
  .btn.mag{border-color:var(--mag)} .btn:active{transform:translateY(1px)}
  .avatarBtn{position:fixed;left:14px;bottom:14px;z-index:900;width:62px;height:62px;border-radius:50%;border:3px solid var(--cyan);box-shadow:0 6px 20px rgba(0,0,0,.5),0 0 20px rgba(0,255,255,.35);overflow:hidden;background:#000;cursor:pointer}
  .avatarBtn img{width:100%;height:100%;object-fit:cover;display:block}
  h2,h3{font-family:'Press Start 2P',cursive}
  .glitch{position:relative;display:inline-block;text-shadow:2px 2px var(--mag),-2px -2px var(--cyan)}
  .muted{color:var(--muted)} .subtle{color:var(--text);font-size:15px;line-height:1.6}
  .hud{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:8px 0 2px}
  .hud a{font-family:'Press Start 2P';font-size:11px;letter-spacing:.3px;color:#eafff8;padding:8px 10px;border-radius:10px;border:2px solid transparent}
  .hud a:hover,.hud a:focus{border-color:var(--cyan);outline:none}
  .block{background:linear-gradient(180deg,rgba(17,17,17,.95),rgba(14,14,14,.95));border:2px solid var(--neon);border-radius:14px;padding:18px;margin-bottom:22px;box-shadow:0 0 22px rgba(0,255,200,.18)}
  .stats{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;text-align:center}
  .stat{border:1px dashed var(--cyan);border-radius:12px;padding:12px}
  .stat h3{color:var(--mag);margin:8px 0 6px}
  .stat p{margin:0 0 6px;font-size:14px;color:#e7fff7}
  .tiny{font-size:11px;color:#9fead7}
  .retry{margin-top:6px;font-size:11px}
  .status-line{margin-top:6px;font-size:11px;color:#9fead7}
  .status-line.err{color:var(--danger)}
  .link-item{margin:14px 0}
  .link-item a{display:inline-block;padding:8px 10px;border:2px solid var(--cyan);border-radius:10px;font-weight:bold}
  .link-desc{margin:6px 2px 0;color:#dffaf1;font-size:14px;line-height:1.6}
  .gallery-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
  .card{position:relative;border:3px solid var(--neon);border-radius:12px;overflow:hidden;background:#000;transform-style:preserve-3d;transition:transform .18s,box-shadow .18s;box-shadow:0 0 18px rgba(0,255,200,.25);cursor:zoom-in}
  .card:hover{transform:rotateX(5deg) rotateY(-5deg) scale(1.02);box-shadow:0 12px 28px rgba(0,0,0,.5),0 0 30px rgba(255,0,255,.3)}
  .card img{width:100%;aspect-ratio:1/1;object-fit:cover}
  .card .shine{position:absolute;inset:0;background:radial-gradient(600px 600px at var(--mx,50%) var(--my,50%),rgba(255,255,255,.18),transparent 40%);mix-blend-mode:screen;opacity:.0;transition:opacity .15s}
  .card:hover .shine{opacity:.8}
  .lightbox{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.86);z-index:1200;padding:18px}
  .lightbox.open{display:grid}
  .lightbox img{max-width:95vw;max-height:85vh;border:3px solid var(--cyan);border-radius:12px;box-shadow:0 0 40px rgba(0,255,255,.4)}
  .lightbox .close{position:absolute;top:14px;right:14px;font-family:'Press Start 2P';font-size:12px;background:#111;border:2px solid var(--mag);color:#fff;padding:10px 12px;border-radius:10px;cursor:pointer}
  .ticker{display:flex;align-items:center;gap:10px;overflow:hidden;border:2px solid var(--cyan);border-radius:12px;padding:10px;background:rgba(0,0,0,.4)}
  .dot{width:10px;height:10px;border-radius:50%;background:var(--ok);box-shadow:0 0 10px var(--ok);animation:pulse 1.3s infinite}
  .dot.err{background:var(--danger)} @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}100%{transform:scale(1)}}
  .ticker-text{white-space:nowrap;display:flex;gap:22px;animation:marq 60s linear infinite}
  @keyframes marq{from{transform:translateX(0)}to{transform:translateX(-50%)}}
  .badge{font-family:'Press Start 2P';font-size:10px;border:2px solid var(--neon);border-radius:8px;padding:4px 6px;background:#0e0e0e}
  .check-btn{font-family:'Press Start 2P';font-size:10px;border:2px solid var(--mag);border-radius:8px;padding:6px 8px;background:#151515;color:#fff}
  footer{margin:10px 0 0;text-align:center;color:#cffff0;font-size:12px;padding-bottom:8px}
  @media (max-width:900px){.gallery-grid{grid-template-columns:repeat(2,1fr)}.stats{grid-template-columns:1fr 1fr}}
  @media (max-width:580px){.stats{grid-template-columns:1fr}}
  @media (prefers-reduced-motion: reduce){.stars,.stars2,.stars3,.ticker-text{animation:none}}
</style>
</head>
<body>

<!-- Stars -->
<div class="bg-wrap" aria-hidden="true"><div class="stars"></div><div class="stars2"></div><div class="stars3"></div></div>

<!-- Floating avatar button -->
<button class="avatarBtn" id="avatarBtn" title="@squisheyez">
  <img id="avatarImg" src="https://unavatar.io/x/squisheyez" alt="@squisheyez avatar">
</button>

<div class="cabinet">
  <div class="cabinet-inner">
    <div class="side-left"></div><div class="side-right"></div>

    <div class="marquee-top">
      <h1 class="glitch" data-text="SQUISHEYEZ — ARCADE EDITION">SQUISHEYEZ — ARCADE EDITION</h1>
      <div class="marquee-sub">
        <strong>Shard Trading:</strong> use our Discord <em>#shardz-swap</em> to <u>advertise</u> trades and find partners.  
        <strong>Complete swaps on AtomicHub</strong> via <em>Offers</em>/<em>Swap</em> so both sides can verify assets and wallets securely.  
        <a href="https://discord.gg/zRCsmJrU" target="_blank" rel="noopener">Join Discord</a>.
      </div>
      <nav class="hud" aria-label="Cabinet HUD">
        <a href="#about">ABOUT</a>
        <a href="#gallery">GALLERY</a>
        <a href="#squish">$SQUISH</a>
        <a href="#blends">BLENDS</a>
        <a href="#links">HUBS</a>
      </nav>
    </div>

    <div class="screen">
      <div class="glass" aria-hidden="true"></div>

      <div class="controls">
        <div class="stick" title="Joystick"></div>
        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <button class="btn" id="toggleCRT" type="button">CRT</button>
          <a class="btn" href="https://discord.gg/zRCsmJrU" target="_blank" rel="noopener">DISCORD</a>
        </div>
      </div>

      <main style="margin-top:14px">
        <!-- ABOUT -->
        <section id="about" class="block subtle">
          <h2 class="glitch" data-text="About">About</h2>
          <p><strong>SquishEyez</strong> is a playful NFT collection on WAX—slimey avatars with giant eyes and bigger personalities. Season 2 adds <em>Shardz</em> (Top/Bottom) and <em>Blend Diskettez</em> so you can craft full SquishEyez variants with matching traits.</p>

          <!-- STATS -->
          <div class="stats" id="statsBar" aria-live="polite">
            <div class="stat"><h3>Total Assets</h3><p id="statAssets">—</p><div class="tiny">All NFTs in <strong>ssquisheyezz</strong></div></div>
            <div class="stat"><h3>Holders</h3><p id="statHolders">—</p><div class="tiny">Unique accounts holding any asset</div></div>
            <div class="stat"><h3>Floor (WAX)</h3><p id="statFloorWax">—</p><div class="tiny">Lowest current listing</div></div>
            <div class="stat"><h3>Market Cap</h3><p id="statMcap">—</p><div class="tiny">≈ Floor × Total Assets</div></div>
          </div>
          <div class="status-line" id="statStatus">Loading via Netlify Function… <a id="statJsonLink" href="/.netlify/functions/squisheyez-stats" target="_blank" rel="noopener">Check JSON</a></div>
          <button id="retryStats" class="btn retry">Retry Stats</button>
        </section>

        <!-- GALLERY -->
        <section id="gallery" class="block">
          <h2 class="glitch" data-text="Showcase">Showcase</h2>
          <div class="gallery-grid">
            <figure class="card"><img loading="lazy" src="https://ipfs.neftyblocks.io/ipfs/Qme3gS6qP3xTvhri5aWNfhZQeWgS5WJfsSTnYmaYfawuHL" alt="Sk8Coin SquishEyez Deck"><span class="shine"></span></figure>
            <figure class="card"><img loading="lazy" src="https://ipfs.neftyblocks.io/ipfs/QmNjE4zmvTh6SK6yusTspi4cgNqKkgCoz2Mc25VCruh8Ud" alt="Asset 2"><span class="shine"></span></figure>
            <figure class="card"><img loading="lazy" src="https://ipfs.neftyblocks.io/ipfs/QmWFFMCmLiqmz9AkQF4nyzNKiR12GXFGdbjBqFEqzkyTc6" alt="Asset 3"><span class="shine"></span></figure>
            <figure class="card"><img loading="lazy" src="https://ipfs.neftyblocks.io/ipfs/QmVMRAcFY15UNbbvDf3NNUHoN3RvCRNcsT8gNttUaR9ony" alt="Asset 4"><span class="shine"></span></figure>
            <figure class="card"><img loading="lazy" src="https://ipfs.neftyblocks.io/ipfs/QmRSkAy4M4GUiVDxsiif3DH86hzir8Jk4wCGZpDTeL1nC7" alt="Asset 5"><span class="shine"></span></figure>
            <figure class="card"><img loading="lazy" src="https://ipfs.neftyblocks.io/ipfs/QmUq61ZJgy2mkYQy6VWQ9o86Ek8XexyiZPTBpA3CKYA9j1" alt="Asset 6"><span class="shine"></span></figure>
            <figure class="card"><img loading="lazy" src="https://ipfs.neftyblocks.io/ipfs/QmctzxUsSuTiie6tAtmmvSEzaEnxa6bk3uECNzzNQNz5jS" alt="Asset 7"><span class="shine"></span></figure>
            <figure class="card"><img loading="lazy" src="https://ipfs.neftyblocks.io/ipfs/QmWCBLTPZFPCKc5ZTNTCoftB5eKNae5aAdJpb7gUpnVhG9" alt="Asset 8"><span class="shine"></span></figure>
            <figure class="card"><img loading="lazy" src="https://ipfs.neftyblocks.io/ipfs/QmW37YUasmF21gcp4w4u5EUdD2Z8cyyedwjavGYHsjTq3Y" alt="Asset 9"><span class="shine"></span></figure>
          </div>
        </section>

        <!-- $SQUISH -->
        <section id="squish" class="block">
          <h2 class="glitch" data-text="$SQUISH">$SQUISH</h2>
          <div class="link-item"><a href="https://eosauthority.com/tokens/ribbitartwrk/SQUISH?network=wax" target="_blank" rel="noopener">$SQUISH on EOS Authority</a><p class="link-desc">On-chain token info (contract <em>ribbitartwrk</em>): supply, holders, transfers, and contract details.</p></div>
          <div class="link-item"><a href="https://waxdao.io/blends/1775" target="_blank" rel="noopener">WaxDAO Blend #1775 — Unwrap 69× $SQUISH NFT</a><p class="link-desc">Unwrap a 69× $SQUISH NFT and receive the underlying <strong>$SQUISH tokens</strong> back to your wallet.</p></div>
          <div class="link-item"><a href="https://waxdao.io/blends/1718" target="_blank" rel="noopener">WaxDAO Blend #1718 — Wrap 69× $SQUISH</a><p class="link-desc">Wrap <strong>69× $SQUISH</strong> into a single NFT for easy trading/collecting.</p></div>
        </section>

        <!-- BLENDS / DROPS / FARMS -->
        <section id="blends" class="block">
          <h2 class="glitch" data-text="Blends, Drops & Farms">Blends, Drops & Farms</h2>

          <div class="ticker" id="ticker">
            <div class="dot" id="tickDot"></div>
            <div class="badge">LIVE FEED</div>
            <div class="ticker-text" id="tickerText"></div>
            <button class="check-btn" id="refreshTicker" type="button">REFRESH</button>
          </div>
          <p class="muted" style="margin:8px 0 14px">If a site blocks cross-origin checks, tap “Check” to open it.</p>

          <h3 class="glitch" data-text="Shardz Blending" style="font-size:18px;margin-top:6px">Shardz Blending</h3>
          <p class="link-desc">To craft a completed SquishEye in Season 2, <strong>blend TOP & BOTTOM Shardz with matching traits</strong> together with a <strong>Blend Diskette</strong>. Matching traits + diskette ⇒ the relevant finished SquishEye.</p>

          <h3 class="glitch" data-text="Blends (WaxDAO)" style="font-size:18px">Blends (WaxDAO)</h3>
          <ul class="subtle" style="list-style:none;padding-left:0;margin-top:8px">
            <li class="link-item"><a href="https://waxdao.io/blends/1876" target="_blank" rel="noopener">Piece: V9.0 / Style: Doodlez</a><div class="link-desc">Craft V9.0 Doodlez with the required shard set.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1875" target="_blank" rel="noopener">Piece: V9.0 / Style: Pixelz</a><div class="link-desc">Blend shards into the V9.0 Pixelz piece.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1874" target="_blank" rel="noopener">Piece: V8.0 / Style: Pixelz</a><div class="link-desc">Blend for V8.0 Pixelz output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1873" target="_blank" rel="noopener">Piece: V8.0 / Style: Doodlez</a><div class="link-desc">Blend for V8.0 Doodlez output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1872" target="_blank" rel="noopener">Piece: V7.0 / Style: Doodlez</a><div class="link-desc">Blend for V7.0 Doodlez output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1871" target="_blank" rel="noopener">Piece: V7.0 / Style: Pixelz</a><div class="link-desc">Blend for V7.0 Pixelz output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1870" target="_blank" rel="noopener">Piece: V6.0 / Style: Pixelz</a><div class="link-desc">Blend for V6.0 Pixelz output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1869" target="_blank" rel="noopener">Piece: V6.0 / Style: Doodlez</a><div class="link-desc">Blend for V6.0 Doodlez output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1868" target="_blank" rel="noopener">Piece: V5.0 / Style: Doodlez</a><div class="link-desc">Blend for V5.0 Doodlez output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1865" target="_blank" rel="noopener">Piece: V5.0 / Style: Pixelz</a><div class="link-desc">Blend for V5.0 Pixelz output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1850" target="_blank" rel="noopener">Piece: V4.0 / Style: Doodlez</a><div class="link-desc">Blend for V4.0 Doodlez output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1849" target="_blank" rel="noopener">Piece: V4.0 / Style: Pixelz</a><div class="link-desc">Blend for V4.0 Pixelz output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1848" target="_blank" rel="noopener">Piece: V3.0 / Style: Doodlez</a><div class="link-desc">Blend for V3.0 Doodlez output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1847" target="_blank" rel="noopener">Piece: V3.0 / Style: Pixelz</a><div class="link-desc">Blend for V3.0 Pixelz output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1846" target="_blank" rel="noopener">Piece: V2.0 / Style: Doodlez</a><div class="link-desc">Blend for V2.0 Doodlez output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1845" target="_blank" rel="noopener">Piece: V2.0 / Style: Pixelz</a><div class="link-desc">Blend for V2.0 Pixelz output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1844" target="_blank" rel="noopener">Piece: V1.0 / Style: Doodlez</a><div class="link-desc">Blend for V1.0 Doodlez output.</div></li>
            <li class="link-item"><a href="https://waxdao.io/blends/1843" target="_blank" rel="noopener">Piece: V1.0 / Style: Pixelz</a><div class="link-desc">Blend for V1.0 Pixelz output.</div></li>
          </ul>

          <h3 class="glitch" data-text="Drops" style="font-size:18px">Drops</h3>
          <ul class="subtle" style="list-style:none;padding-left:0;margin-top:8px">
            <li class="link-item"><a href="https://nfthive.io/drop/8687" target="_blank" rel="noopener">Season 2 Shard Packz (NFTHive)</a><div class="link-desc">Official S2 Shard packs used in blending (feeds Pixelz/Doodlez outcomes).</div></li>
            <li class="link-item"><a href="https://nfthive.io/drop/8693" target="_blank" rel="noopener">Blend Diskettez (NFTHive)</a><div class="link-desc">Diskettez required to process shard blends.</div></li>
            <li class="link-item"><a href="https://nfthive.io/drop/10860" target="_blank" rel="noopener">SquishTrialZ (NFTHive)</a><div class="link-desc">Limited “trial” 1/1 SquishArtZ pieces — check live availability.</div></li>
            <li class="link-item"><a href="https://neftyblocks.com/collection/skatecoinwax/drops/228566" target="_blank" rel="noopener">Sk8Coin: SquishEyez Deck Drop (NeftyBlocks)</a><div class="link-desc">A deck component within Sk8Coin; keep an eye on supply and price.</div></li>
          </ul>

          <h3 class="glitch" data-text="Farms (WaxDAO)" style="font-size:18px">Farms (WaxDAO)</h3>
          <ul class="subtle" style="list-style:none;padding-left:0;margin-top:8px">
            <li class="link-item"><a href="https://waxdao.io/farm/squish2.exe" target="_blank" rel="noopener">Squish2.exe Farm</a><div class="link-desc">Stake eligible “floppy”/related assets to earn <strong>$SQUISH</strong> (rates vary; see farm UI).</div></li>
            <li class="link-item"><a href="https://waxdao.io/v2/farm/squish.bat" target="_blank" rel="noopener">Squish.bat Farm</a><div class="link-desc">Stake OG Squisheyez (schema <em>squisheyezs1</em>); check the UI for current daily rate & requirements.</div></li>
          </ul>
        </section>

        <!-- HUBS -->
        <section id="links" class="block">
          <h2 class="glitch" data-text="Explore SquishEyez">Explore SquishEyez</h2>
          <div class="link-item"><a href="https://neftyblocks.com/collection/ssquisheyezz" target="_blank" rel="noopener">NeftyBlocks — Collection Hub</a><p class="link-desc">Overview, drops, blends, and marketplace access.</p></div>
          <div class="link-item"><a href="https://neftyblocks.com/marketplace/listing?collection_name=ssquisheyezz" target="_blank" rel="noopener">NeftyBlocks Marketplace — ssquisheyezz</a><p class="link-desc">Browse live listings, filter by traits/schemas, buy in WAX.</p></div>
          <div class="link-item"><a href="https://nfthive.io/collection/ssquisheyezz" target="_blank" rel="noopener">NFTHive — Collection</a><p class="link-desc">Listings, sales charts, trait filters, and analytics.</p></div>
          <div class="link-item"><a href="https://wax.atomichub.io/explorer/collection/ssquisheyezz" target="_blank" rel="noopener">AtomicHub — Explorer</a><p class="link-desc">Templates, assets, sales, and trades across WAX.</p></div>
          <div class="link-item"><a href="https://waxdao.io" target="_blank" rel="noopener">WAXDAO</a><p class="link-desc">Blends and farms platform used by the project.</p></div>
          <div class="link-item"><a href="https://discord.gg/zRCsmJrU" target="_blank" rel="noopener">Discord — Community & Shardz Swap</a><p class="link-desc"><strong>Advertise trades in Discord</strong>, then complete them on <strong>AtomicHub Offers/Swap</strong> so both sides can verify everything safely.</p></div>
          <div class="link-item"><a href="https://x.com/squisheyez" target="_blank" rel="noopener">X (Twitter) — @squisheyez</a><p class="link-desc">Follow updates, previews, and community highlights.</p></div>
        </section>
      </main>

      <footer>&copy; 2025 Next Door Media. All rights reserved.</footer>
    </div>
  </div>
</div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox" aria-hidden="true">
  <button class="close" id="closeLightbox" aria-label="Close">CLOSE</button>
  <img id="lightboxImg" alt="Expanded artwork">
</div>

<audio id="bg-music" preload="metadata" playsinline>
  <source src="https://cdn.pixabay.com/download/audio/2021/10/26/audio_0a0f2d7c26.mp3?filename=8-bit-arcade-110012.mp3" type="audio/mpeg">
</audio>

<script>
  /* NAV + CRT */
  document.querySelectorAll('.hud a[href^="#"]').forEach(a=>a.addEventListener('click',e=>{e.preventDefault();document.getElementById(a.getAttribute('href').slice(1))?.scrollIntoView({behavior:'smooth'})}));
  document.getElementById('toggleCRT').addEventListener('click',()=>document.body.classList.toggle('crt-on'));
  const KONAMI=[38,38,40,40,37,39,37,39,66,65];let buffer=[];window.addEventListener('keydown',e=>{buffer.push(e.keyCode);if(buffer.slice(-KONAMI.length).every((v,i)=>v===KONAMI[i])){document.body.classList.toggle('crt-on');buffer=[];}});

  /* Avatar → play + top; with fallbacks */
  const avatarBtn=document.getElementById('avatarBtn');
  const avatarImg=document.getElementById('avatarImg');
  const music=document.getElementById('bg-music'); let musicStarted=false;
  avatarBtn.addEventListener('click',()=>{if(!musicStarted){musicStarted=true;music.volume=.6;music.play().catch(()=>{});}window.scrollTo({top:0,behavior:'smooth'})});
  avatarImg.addEventListener('error',()=>{avatarImg.src='https://unavatar.io/twitter/squisheyez';avatarImg.onerror=()=>{avatarImg.src='https://unavatar.io/x/squisheyz';avatarImg.onerror=()=>{avatarImg.src='https://ipfs.neftyblocks.io/ipfs/QmNjE4zmvTh6SK6yusTspi4cgNqKkgCoz2Mc25VCruh8Ud';};};});

  /* Gallery tilt + lightbox */
  const cards=document.querySelectorAll('.card');const lb=document.getElementById('lightbox');const lbImg=document.getElementById('lightboxImg');const lbClose=document.getElementById('closeLightbox');
  cards.forEach(c=>{c.addEventListener('mousemove',e=>{const r=c.getBoundingClientRect(),x=e.clientX-r.left,y=e.clientY-r.top;c.style.setProperty('--mx',(x/r.width*100)+'%');c.style.setProperty('--my',(y/r.height*100)+'%');});c.addEventListener('mouseleave',()=>{c.style.removeProperty('--mx');c.style.removeProperty('--my');});c.addEventListener('click',()=>{lbImg.src=c.querySelector('img').src;lb.classList.add('open');lb.setAttribute('aria-hidden','false');});});
  lbClose.addEventListener('click',()=>{lb.classList.remove('open');lb.setAttribute('aria-hidden','true');}); lb.addEventListener('click',e=>{if(e.target===lb)lbClose.click();});

  /* Ticker */
  const items=[{label:'WaxDAO Blend #1775 — Unwrap 69× $SQUISH',url:'https://waxdao.io/blends/1775',type:'blend'},{label:'WaxDAO Blend #1718 — Wrap 69× $SQUISH',url:'https://waxdao.io/blends/1718',type:'blend'},{label:'NFTHive Drop 8687 — S2 Shard Packz',url:'https://nfthive.io/drop/8687',type:'drop'},{label:'NFTHive Drop 8693 — Blend Diskettez',url:'https://nfthive.io/drop/8693',type:'drop'},{label:'NFTHive Drop 10860 — SquishTrialZ',url:'https://nfthive.io/drop/10860',type:'drop'},{label:'NeftyBlocks — Sk8Coin Deck',url:'https://neftyblocks.com/collection/skatecoinwax/drops/228566',type:'drop'}];
  const tickerText=document.getElementById('tickerText');const tickDot=document.getElementById('tickDot');const refreshBtn=document.getElementById('refreshTicker');
  function renderTicker(map){const doubled=[...items,...items];tickerText.innerHTML=doubled.map(it=>{const st=map.get(it.url)||{ok:false};const badge=st.ok?'OPEN/LIVE':'CHECK';return `<span><strong>${it.type.toUpperCase()}:</strong> ${it.label} <a class="badge" href="${it.url}" target="_blank" rel="noopener">${badge}</a></span>`}).join('');}
  async function probe(url){try{await fetch(url,{method:'GET',mode:'no-cors',cache:'no-cache'});return {ok:true}}catch(e){return {ok:false}}}
  async function refreshTicker(){tickDot.classList.remove('err');const map=new Map();try{await Promise.all(items.map(async it=>map.set(it.url,await probe(it.url))));if(items.every(i=>map.get(i.url)?.ok===false))tickDot.classList.add('err')}catch(e){tickDot.classList.add('err')}renderTicker(map)}
  refreshBtn.addEventListener('click',refreshTicker);refreshTicker();

  /* ---------- STATS: Proxies → Function → Public APIs ---------- */
  const $assets=document.getElementById('statAssets'),$holders=document.getElementById('statHolders'),$floor=document.getElementById('statFloorWax'),$mcap=document.getElementById('statMcap'),$status=document.getElementById('statStatus'),$jsonLink=document.getElementById('statJsonLink');
  const COLLECTION='ssquisheyezz';
  const fmtN=n=>n==null?'—':new Intl.NumberFormat().format(n);
  const fmtW=x=>x==null?'—':new Intl.NumberFormat(undefined,{minimumFractionDigits:2,maximumFractionDigits:2}).format(x)+' WAX';

  async function getJSON(u, t=12000){const c=new AbortController(),to=setTimeout(()=>c.abort(),t);try{const r=await fetch(u,{signal:c.signal,headers:{accept:'application/json'}});if(!r.ok)throw new Error('HTTP '+r.status+' @ '+u);return await r.json()}finally{clearTimeout(to)}}
  async function getDataProxyAssets(path){const bases=['/aa'];let last;for(const b of bases){const u=b+path;try{$status.textContent='Stats via proxy '+u;$jsonLink.href=u;const j=await getJSON(u);return j.data??j}catch(e){last=e}}throw last}
  async function getDataProxyMarket(path){const bases=['/am'];let last;for(const b of bases){const u=b+path;try{$status.textContent='Stats via proxy '+u;$jsonLink.href=u;const j=await getJSON(u);return j.data??j}catch(e){last=e}}throw last}

  async function fetchViaProxies(){
    const [acct, stats] = await Promise.all([
      getDataProxyAssets(`/atomicassets/v1/accounts?collection_name=${COLLECTION}&page=1&limit=1000`),
      getDataProxyAssets(`/atomicassets/v1/collections/${COLLECTION}/stats`)
    ]);
    let holders = Array.isArray(acct)?acct.length:0;
    let total_assets = Number(stats?.assets ?? stats?.assets_count ?? stats?.num_assets ?? 0) || 0;
    // Minimal multi-page sum if necessary:
    if(total_assets===0){
      let page=1,total=0,chunk=acct;
      while(Array.isArray(chunk)&&chunk.length){for(const row of chunk){total += Number(row.assets)||0} if(chunk.length<1000||page>=10)break; page++; chunk = await getDataProxyAssets(`/atomicassets/v1/accounts?collection_name=${COLLECTION}&page=${page}&limit=1000`);}
      total_assets=total||null;
    }
    // Floor
    let floor=null;
    try{
      const d=await getDataProxyMarket(`/atomicmarket/v1/sales?collection_name=${COLLECTION}&state=1&order=asc&sort=price&symbol=WAX&limit=1`);
      if(Array.isArray(d)&&d.length){const lp=d[0].listing_price||d[0].price?.amount||d[0].price; if(typeof lp==='string'){const m=lp.match(/([\d.]+)/); if(m) floor=parseFloat(m[1]);} else if(typeof lp==='number'){floor=lp/1e8;} else if(lp&&lp.amount){floor=Number(lp.amount)/Math.pow(10,lp.token_precision||8);}}
    }catch(_){
      try{
        const d2=await getDataProxyMarket(`/atomicmarket/v2/sales?collection_name=${COLLECTION}&state=1&order=asc&sort=price&limit=1`);
        if(Array.isArray(d2)&&d2.length){const p=d2[0].price?.amount||d2[0].listing_price; const prec=d2[0].price?.token_precision||8; if(p!=null) floor=Number(p)/Math.pow(10,prec);}
      }catch(__){}
    }
    return {holders,total_assets,floor_wax:floor};
  }

  async function fetchViaFunction(){
    const urls=['/.netlify/functions/squisheyez-stats','/api/squisheyez-stats']; let last;
    for(const u of urls){try{$status.textContent='Stats via '+u;$jsonLink.href=u;const j=await getJSON(u);if(j&&j.ok!==false)return j}catch(e){last=e}}
    throw last||new Error('Function not reachable');
  }

  const ATOMIC_BASES=['https://wax.api.atomicassets.io','https://atomic.wax.io','https://api.wax-aa.bountyblok.io'];
  async function getAnyBase(path){let last;for(const b of ATOMIC_BASES){const u=b+path;try{$status.textContent='Stats via '+b;$jsonLink.href=u;const j=await getJSON(u);return j.data??j}catch(e){last=e}}throw last}
  async function fetchDirect(){
    let holders=0,total_assets=null;
    let page=1,limit=1000;
    while(true){const data=await getAnyBase(`/atomicassets/v1/accounts?collection_name=${COLLECTION}&page=${page}&limit=${limit}`);if(!Array.isArray(data)||data.length===0)break;holders+=data.length;for(const row of data){if(row.assets) total_assets=(total_assets||0)+Number(row.assets)||0;else if(row.templates) for(const t of row.templates){total_assets=(total_assets||0)+Number(t.assets)||0;}} if(data.length<limit||page>=10)break;page++;}
    try{const s=await getAnyBase(`/atomicassets/v1/collections/${COLLECTION}/stats`);const n=Number(s?.assets??s?.assets_count??s?.num_assets);if(isFinite(n)&&n>0) total_assets=n}catch(_){}
    let floor=null; try{const d=await getAnyBase(`/atomicmarket/v1/sales?collection_name=${COLLECTION}&state=1&order=asc&sort=price&symbol=WAX&limit=1`);if(Array.isArray(d)&&d.length){const lp=d[0].listing_price||d[0].price?.amount||d[0].price;if(typeof lp==='string'){const m=lp.match(/([\d.]+)/);if(m)floor=parseFloat(m[1]);}else if(typeof lp==='number'){floor=lp/1e8;}else if(lp&&lp.amount){floor=Number(lp.amount)/Math.pow(10,lp.token_precision||8);}}}catch(_){}
    return {holders,total_assets,floor_wax:floor};
  }

  function renderStats(d){const mcap=(d.floor_wax&&d.total_assets)?d.floor_wax*d.total_assets:null;
    $assets.textContent=fmtN(d.total_assets); $holders.textContent=fmtN(d.holders);
    $floor.textContent=fmtW(d.floor_wax); $mcap.textContent=mcap?fmtW(mcap):'—';
  }

  async function loadStats(){
    try{renderStats(await fetchViaProxies());return}
    catch(e){console.warn('[stats] proxies failed',e);$status.classList.add('err');$status.innerHTML='Proxy failed → trying Netlify Function… <a href="/.netlify/functions/squisheyez-stats" target="_blank" rel="noopener">Check JSON</a>';}
    try{renderStats(await fetchViaFunction());$status.classList.remove('err');return}
    catch(e){console.warn('[stats] function failed',e);$status.classList.add('err');$status.innerHTML='Function failed → trying public Atomic APIs…';}
    try{renderStats(await fetchDirect());$status.classList.remove('err');}
    catch(e){console.error('[stats] all methods failed',e);$assets.textContent=$holders.textContent=$floor.textContent=$mcap.textContent='—';$status.classList.add('err');$status.innerHTML='Stats error. Verify redirects/functions in netlify.toml & check function logs.';}
  }
  document.getElementById('retryStats').addEventListener('click',loadStats); loadStats();
</script>
</body>
</html>