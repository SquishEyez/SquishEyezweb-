<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SquishEyez NFT Collection — Super Kewl</title>

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://ipfs.neftyblocks.io" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap">

  <style>
    :root{
      --neon:#33ff99; --mag:#ff00ff; --cyan:#00ffff; --bg:#0a0a0a;
      --panel:#111; --text:#bdf9e7; --muted:#7ee8cf; --danger:#ff5d9e; --ok:#78ffa8;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--neon)}
    a{color:var(--cyan);text-decoration:none} a:hover{color:var(--mag)} img{display:block}

    /* CRT + parallax (unchanged from last version)… */
    body::before{content:"";position:fixed;inset:0;pointer-events:none;z-index:1000;
      background:repeating-linear-gradient(to bottom,rgba(0,0,0,.18)0 2px,transparent 2px 4px);
      mix-blend-mode:overlay;opacity:.6}
    body.crt-on{filter:contrast(1.03) saturate(1.1)}
    body.crt-on::after{content:"";position:fixed;inset:0;pointer-events:none;z-index:1001;
      background:radial-gradient(ellipse at center,rgba(0,0,0,0) 0%, rgba(0,0,0,.25) 70%, rgba(0,0,0,.6) 100%)}
    .bg-wrap{position:fixed;inset:0;z-index:-2;overflow:hidden}
    .stars,.stars2,.stars3{position:absolute;inset:-50%;background-repeat:repeat;
      background-image:radial-gradient(2px 2px at 20px 30px,#fff,transparent),
      radial-gradient(2px 2px at 100px 80px,#fff,transparent),
      radial-gradient(2px 2px at 200px 130px,#fff,transparent),
      radial-gradient(2px 2px at 300px 40px,#fff,transparent);
      animation:drift 120s linear infinite;opacity:.25;filter:blur(.3px)}
    .stars2{animation-duration:200s;opacity:.18} .stars3{animation-duration:320s;opacity:.12}
    @keyframes drift{from{transform:translate3d(0,0,0)} to{transform:translate3d(-500px,-300px,0)}}
    .grid{position:absolute;inset:0;z-index:-1;opacity:.25;background:
      linear-gradient(rgba(51,255,153,.18) 1px, transparent 1px),
      linear-gradient(90deg, rgba(51,255,153,.18) 1px, transparent 1px);
      background-size:60px 60px;transform:perspective(600px) rotateX(60deg) translateY(30vh);
      box-shadow:0 -30vh 60vh rgba(0,0,0,.7) inset;filter:drop-shadow(0 0 8px rgba(51,255,153,.5));
      animation:gridglow 3s ease-in-out infinite alternate}
    @keyframes gridglow{from{filter:drop-shadow(0 0 6px rgba(51,255,153,.35))} to{filter:drop-shadow(0 0 14px rgba(0,255,255,.6))}}

    h1,h2,h3{font-family:'Press Start 2P',cursive;letter-spacing:.5px}
    .glitch{position:relative;display:inline-block;text-shadow:2px 2px var(--mag),-2px -2px var(--cyan);animation:flicker 2.2s infinite}
    .glitch::before,.glitch::after{content:attr(data-text);position:absolute;left:0;top:0;pointer-events:none}
    .glitch::before{transform:translate(2px,0);color:var(--mag);mix-blend-mode:screen;opacity:.7}
    .glitch::after{transform:translate(-2px,0);color:var(--cyan);mix-blend-mode:screen;opacity:.7}
    @keyframes flicker{0%,18%,22%,26%,55%,57%,100%{filter:none}20%,24%{filter:brightness(1.2) drop-shadow(0 0 6px var(--mag))}}

    .nav{position:sticky;top:0;z-index:900;background:rgba(17,17,17,.9);border-bottom:2px solid var(--neon);backdrop-filter:blur(6px)}
    .nav-inner{max-width:1200px;margin:0 auto;display:flex;gap:14px;align-items:center;justify-content:space-between;padding:10px 14px}
    .nav a{font-family:'Press Start 2P',cursive;font-size:11px;letter-spacing:.3px;padding:10px 12px;border:2px solid transparent;border-radius:10px;color:var(--muted)}
    .nav a:hover,.nav a:focus{border-color:var(--cyan);color:#fff;outline:none}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:40px;height:40px;border-radius:50%;box-shadow:0 0 10px var(--mag)}
    .brand span{font-family:'Press Start 2P';font-size:12px}

    section{padding:28px 16px} .wrap{max-width:1200px;margin:0 auto}
    .block{background:linear-gradient(180deg, rgba(17,17,17,.95), rgba(15,15,15,.95));border:2px solid var(--neon);border-radius:14px;padding:20px;margin-bottom:26px;box-shadow:0 0 22px rgba(0,255,200,.25);transition:transform .2s, box-shadow .2s}
    .block:hover{transform:translateY(-2px);box-shadow:0 0 34px rgba(255,0,255,.35)}
    .subtle{color:var(--text);font-size:15px;line-height:1.6}

    /* === ENHANCED STATS BAR === */
    .stats{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;text-align:center}
    .stat{border:1px dashed var(--cyan);border-radius:12px;padding:14px;transition:transform .2s}
    .stat:hover{transform:translateY(-2px)}
    .stat h3{color:var(--mag);margin:10px 0 6px}
    .stat p{margin:0 0 6px;font-size:14px;color:#e7fff7}
    .tiny{font-size:11px;color:#9fead7}

    /* Links, Gallery, Lightbox, Contact (unchanged)… */
    .link-item{margin:16px 0}
    .link-item a{display:inline-block;padding:10px 14px;border:2px solid var(--cyan);border-radius:10px;box-shadow:0 0 10px rgba(0,255,255,.25) inset;font-weight:bold}
    .link-desc{margin:8px 2px 0;color:var(--text);font-size:14px;line-height:1.5}

    .gallery-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .card{position:relative;border:3px solid var(--neon);border-radius:12px;overflow:hidden;background:#000;transform-style:preserve-3d;transition:transform .18s, box-shadow .18s;box-shadow:0 0 18px rgba(0,255,200,.25);cursor:zoom-in}
    .card:hover{transform:rotateX(5deg) rotateY(-5deg) scale(1.02);box-shadow:0 12px 28px rgba(0,0,0,.5), 0 0 30px rgba(255,0,255,.3)}
    .card img{width:100%;height:auto;aspect-ratio:1/1;object-fit:cover}
    .card .shine{position:absolute;inset:0;background:radial-gradient(600px 600px at var(--mx,50%) var(--my,50%), rgba(255,255,255,.18), transparent 40%);mix-blend-mode:screen;pointer-events:none;opacity:.0;transition:opacity .15s}
    .card:hover .shine{opacity:.8}

    .lightbox{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.85);z-index:1200;padding:18px}
    .lightbox.open{display:grid}
    .lightbox img{max-width:95vw;max-height:85vh;border:3px solid var(--cyan);border-radius:12px;box-shadow:0 0 40px rgba(0,255,255,.4)}
    .lightbox .close{position:absolute;top:14px;right:14px;font-family:'Press Start 2P';font-size:12px;background:#111;border:2px solid var(--mag);color:#fff;padding:10px 12px;border-radius:10px;cursor:pointer}

    #intro-screen{position:fixed;inset:0;background:#000;display:flex;align-items:center;justify-content:center;flex-direction:column;color:var(--neon);z-index:2000;text-align:center;padding:24px}
    #press-start{font-family:'Press Start 2P';animation:flicker 1.5s infinite}
    .start-hint{color:#9fffe0;font-size:12px;margin-top:10px;opacity:.8}
    .intro-hidden header,.intro-hidden main,.intro-hidden footer,.intro-hidden .nav{display:none}
    body:not(.intro-hidden) #intro-screen{display:none}

    .to-top{position:fixed;right:14px;bottom:14px;z-index:800;background:#111;border:2px solid var(--neon);border-radius:12px;padding:10px 12px;font-family:'Press Start 2P';font-size:11px;opacity:.85;cursor:pointer;display:none}
    .to-top.show{display:block} .to-top:hover{background:var(--neon);color:#111}

    /* === SLOWER TICKER === */
    .ticker{display:flex;align-items:center;gap:12px;overflow:hidden;border:2px solid var(--cyan);border-radius:12px;padding:12px;background:rgba(0,0,0,.4)}
    .dot{width:10px;height:10px;border-radius:50%;background:var(--ok);box-shadow:0 0 10px var(--ok);animation:pulse 1.3s infinite}
    .dot.err{background:var(--danger);box-shadow:0 0 10px var(--danger)}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}100%{transform:scale(1)}}
    .ticker-text{white-space:nowrap;display:flex;gap:22px;animation:marq 60s linear infinite} /* was 28s → now 60s */
    @keyframes marq{from{transform:translateX(0)} to{transform:translateX(-50%)}}
    .badge{font-family:'Press Start 2P';font-size:10px;border:2px solid var(--neon);border-radius:8px;padding:6px 8px;background:#0e0e0e}
    .check-btn{font-family:'Press Start 2P';font-size:10px;border:2px solid var(--mag);border-radius:8px;padding:6px 8px;background:#151515;color:#fff}

    @media (max-width:900px){.gallery-grid{grid-template-columns:repeat(2,1fr)}.stats{grid-template-columns:1fr 1fr}.brand span{display:none}}
    @media (max-width:580px){.stats{grid-template-columns:1fr}.nav a{font-size:10px;padding:8px}}
    @media (prefers-reduced-motion: reduce){.stars,.stars2,.stars3,.grid,.block,.card,.shine,.ticker-text{animation:none;transition:none}}
  </style>
</head>
<body class="intro-hidden">
  <div class="bg-wrap" aria-hidden="true"><div class="stars"></div><div class="stars2"></div><div class="stars3"></div><div class="grid"></div></div>

  <div id="intro-screen">
    <h1 class="glitch" data-text="★ SQUISHEYEZ ★" style="margin:0 0 12px">★ SQUISHEYEZ ★</h1>
    <p id="press-start">PRESS START</p>
    <p class="start-hint">(tap anywhere to enter)</p>
  </div>

  <nav class="nav">
    <div class="nav-inner">
      <div class="brand">
        <img src="https://pbs.twimg.com/profile_images/1788039407741648896/TtNCpsSt.jpg" alt="SquishEyez logo">
        <span>SQUISHEYEZ</span>
      </div>
      <div class="links">
        <a href="#about">ABOUT</a>
        <a href="#gallery">GALLERY</a>
        <a href="#squish">$SQUISH</a>
        <a href="#blends">BLENDS</a>
        <a href="#links">HUBS</a>
        <a href="#contact">CONTACT</a>
        <a href="https://discord.gg/zRCsmJrU" target="_blank" rel="noopener">DISCORD</a>
      </div>
    </div>
  </nav>

  <header class="wrap" style="padding:22px 16px 0">
    <h1 class="glitch" data-text="SquishEyez NFT Collection">SquishEyez NFT Collection</h1>
  </header>

  <main>
    <!-- ABOUT -->
    <section id="about" class="wrap">
      <div class="block subtle">
        <h2 class="glitch" data-text="About">About</h2>
        <p><strong>Welcome to the SquishEyez Universe!</strong> A playful NFT collection on the WAX blockchain featuring charming, slime-like avatars infused with vibrant personality…</p>
        <p>Created by artist <strong>@buttzwithaZ</strong>…</p>
      </div>

      <!-- === DYNAMIC STATS BAR (auto-fills) === -->
      <div class="stats wrap" id="statsBar" aria-live="polite">
        <div class="stat">
          <h3>Total Assets</h3>
          <p id="statAssets">—</p>
          <div class="tiny">All NFTs in <strong>ssquisheyezz</strong></div>
        </div>
        <div class="stat">
          <h3>Holders</h3>
          <p id="statHolders">—</p>
          <div class="tiny">Unique accounts holding any asset</div>
        </div>
        <div class="stat">
          <h3>Floor (WAX)</h3>
          <p id="statFloorWax">—</p>
          <div class="tiny">Lowest current listing price</div>
        </div>
        <div class="stat">
          <h3>Market Cap</h3>
          <p id="statMcap">—</p>
          <div class="tiny">≈ Floor × Total Assets</div>
        </div>
      </div>
    </section>

    <!-- GALLERY (unchanged)… -->
    <!-- $SQUISH (unchanged)… -->

    <!-- BLENDS + SLOW TICKER -->
    <section id="blends" class="wrap">
      <div class="block">
        <h2 class="glitch" data-text="Blends, Drops & Farms">Blends, Drops & Farms</h2>

        <div class="ticker" id="ticker">
          <div class="dot" id="tickDot" title="Status indicator"></div>
          <div class="badge">LIVE FEED</div>
          <div class="ticker-text" id="tickerText" aria-live="polite"></div>
          <button class="check-btn" id="refreshTicker" type="button">REFRESH</button>
        </div>
        <p class="subtle" style="margin:8px 0 18px">Rotates through key blends & drops. If a site blocks cross-origin checks, tap “Check” to open it directly.</p>

        <!-- (Your blends/drops/farms lists remain unchanged here) -->
        <!-- … -->
      </div>
    </section>

    <!-- HUBS + CONTACT (unchanged)… -->
  </main>

  <footer><p>&copy; 2025 Next Door Media. All rights reserved.</p></footer>

  <!-- LIGHTBOX + AUDIO + TOP BUTTON (unchanged markup)… -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <button class="close" id="closeLightbox" aria-label="Close">CLOSE</button>
    <img id="lightboxImg" alt="Expanded artwork">
  </div>
  <audio id="bg-music" loop>
    <source src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/8-Bit_Ninjas/Single/8-Bit_Ninjas_-_Insert_Coin.mp3" type="audio/mpeg">
  </audio>
  <button class="to-top" id="toTop" aria-label="Back to top">▲ TOP</button>

  <script>
    // Intro / music / nav / top button / gallery lightbox / Konami — same as before…
    const intro = document.getElementById('intro-screen');
    const music = document.getElementById('bg-music');
    const toTop = document.getElementById('toTop');
    document.body.classList.remove('intro-hidden');
    intro.addEventListener('click',()=>{document.body.classList.add('intro-hidden'); music.play().catch(()=>{});},{once:true});
    document.querySelectorAll('.nav a[href^="#"]').forEach(a=>a.addEventListener('click',e=>{e.preventDefault(); const id=a.getAttribute('href').slice(1); const el=document.getElementById(id); if(el) el.scrollIntoView({behavior:'smooth'});} ));
    const showTop=()=>{if(window.scrollY>600) toTop.classList.add('show'); else toTop.classList.remove('show');}; window.addEventListener('scroll',showTop,{passive:true});
    toTop.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));
    const cards=document.querySelectorAll('.card'); const lightbox=document.getElementById('lightbox'); const lightboxImg=document.getElementById('lightboxImg'); const closeLightbox=document.getElementById('closeLightbox');
    cards.forEach(card=>{card.addEventListener('mousemove',e=>{const r=card.getBoundingClientRect(); const x=e.clientX-r.left; const y=e.clientY-r.top; card.style.setProperty('--mx',(x/r.width*100)+'%'); card.style.setProperty('--my',(y/r.height*100)+'%');}); card.addEventListener('mouseleave',()=>{card.style.removeProperty('--mx'); card.style.removeProperty('--my');}); card.addEventListener('click',()=>{const img=card.querySelector('img'); lightboxImg.src=img.src; lightboxImg.alt=img.alt||'Expanded artwork'; lightbox.classList.add('open'); lightbox.setAttribute('aria-hidden','false');});});
    closeLightbox.addEventListener('click',()=>{lightbox.classList.remove('open'); lightbox.setAttribute('aria-hidden','true');});
    lightbox.addEventListener('click',(e)=>{if(e.target===lightbox) closeLightbox.click();});
    const KONAMI=[38,38,40,40,37,39,37,39,66,65]; let buffer=[]; window.addEventListener('keydown',(e)=>{buffer.push(e.keyCode); if(buffer.slice(-KONAMI.length).every((v,i)=>v===KONAMI[i])){document.body.classList.toggle('crt-on'); buffer=[];}});

    // ============================
    // LIVE TICKER (slower, 60s)
    // ============================
    const items=[
      {label:'WaxDAO Blend #1775 — Unwrap 69× $SQUISH', url:'https://waxdao.io/blends/1775', type:'blend'},
      {label:'WaxDAO Blend #1718 — Wrap 69× $SQUISH',   url:'https://waxdao.io/blends/1718', type:'blend'},
      {label:'NFTHive Drop 8687 — S2 Shard Packz',      url:'https://nfthive.io/drop/8687',  type:'drop'},
      {label:'NFTHive Drop 8693 — Blend Diskettez',     url:'https://nfthive.io/drop/8693',  type:'drop'},
      {label:'NFTHive Drop 10860 — SquishTrialZ',       url:'https://nfthive.io/drop/10860', type:'drop'},
      {label:'NeftyBlocks — Sk8Coin Deck',              url:'https://neftyblocks.com/collection/skatecoinwax/drops/228566', type:'drop'}
    ];
    const tickerText=document.getElementById('tickerText'); const tickDot=document.getElementById('tickDot'); const refreshBtn=document.getElementById('refreshTicker');
    function renderTicker(map){ const doubled=[...items,...items]; tickerText.innerHTML=doubled.map(it=>{const st=map.get(it.url)||{ok:false}; const badge=st.ok?'OPEN/LIVE':'CHECK'; return `<span><strong>${it.type.toUpperCase()}:</strong> ${it.label} <a class="badge" href="${it.url}" target="_blank" rel="noopener">${badge}</a></span>`}).join('');}
    async function probe(url){ try{ const r=await fetch(url,{method:'GET',mode:'no-cors',cache:'no-cache'}); return {ok:true}; }catch(e){ return {ok:false}; } }
    async function refreshTicker(){ tickDot.classList.remove('err'); const map=new Map(); try{ await Promise.all(items.map(async it=>{map.set(it.url, await probe(it.url));})); const allFail=items.every(i=>map.get(i.url)?.ok===false); if(allFail) tickDot.classList.add('err'); }catch(e){ tickDot.classList.add('err'); } renderTicker(map); }
    refreshBtn.addEventListener('click',refreshTicker); refreshTicker();

    // ============================
    // DYNAMIC COLLECTION STATS
    // ============================
    const fmt=(n)=> n==null?'—':new Intl.NumberFormat().format(n);
    const fmtWax=(x)=> x==null?'—':new Intl.NumberFormat(undefined,{minimumFractionDigits:2,maximumFractionDigits:2}).format(x)+' WAX';
    const $assets=document.getElementById('statAssets');
    const $holders=document.getElementById('statHolders');
    const $floor=document.getElementById('statFloorWax');
    const $mcap=document.getElementById('statMcap');

    async function loadStats(){
      try{
        const res = await fetch('/api/squisheyez-stats');
        if(!res.ok) throw new Error('stats failed');
        const j = await res.json();
        $assets.textContent = fmt(j.total_assets);
        $holders.textContent = fmt(j.holders);
        $floor.textContent   = fmtWax(j.floor_wax);
        $mcap.textContent    = j.floor_wax && j.total_assets ? fmtWax(j.floor_wax * j.total_assets) : '—';
      }catch(e){
        $assets.textContent=$holders.textContent=$floor.textContent=$mcap.textContent='—';
      }
    }
    loadStats();
  </script>
</body>
</html>
